cardSearch_permanentCreateToken:
 -> 
  [_cardTextMatch2_1:#creatureTypes.capitalize#]
  [_customQuery:text="create" text="creature token" t!=instant t!=sorcery]
  [#_customQuery.cardSearchCustomQuery(1,undefined,create $ $ creature token)#]
  [_cardName:#_cardName1#][_tokenType:#_cardTextMatch2_1#]

cardSearch_nameACard:
 - |
  [_customQuery:text="card name" text!="card named"]
  [#_customQuery.cardSearchCustomQuery#]
  [_cardName:#_cardName1#]

cardSearch_eachPlayerStepTrigger:
 - |
  [_customQuery:text="beginning of each player's"]
  [#_customQuery.cardSearchCustomQuery#]
  [_cardName:#_cardName1#]

cardSearch_playersCantX:
 - |
  [_customQuery:text="players can't" text!="split second"]
  [#_customQuery.cardSearchCustomQuery#]
  [_cardName:#_cardName1#]

_winOrLoseChoice:
- "[_winOrLose:win][_winningOrLosing:winning]"
- "[_winOrLose:lose][_winningOrLosing:losing]"


cardSearch_winLoseTheGame:
 - |
  [_winOrLose:#_winOrLoseChoice#][_passiveWinOrLose:#_winningOrLosing#][_causesPrevents:causes][_causingPreventing:causing][_causingTo:to]
  [_customQuery:text="#_winOrLose# the game" text!=can't]
  [#_customQuery.cardSearchCustomQuery#]
  [_cardName:#_cardName1#]
 - |
  [_winOrLose:lose][_passiveWinOrLose:lose][_causesPrevents:causes][_causingPreventing:causing][_causingTo:to]
  [_customQuery:text="player loses the game"]
  [#_customQuery.cardSearchCustomQuery#]
  [_cardName:#_cardName1#]
 - |
  [_winOrLose:#_winOrLoseChoice#][_passiveWinOrLose:#_winningOrLosing#][_causesPrevents:prevents][_causingPreventing:preventing][_causingTo:from]
  [_customQuery:text="cannot #_winOrLose# the game"]
  [#_customQuery.cardSearchCustomQuery#]
  [_cardName:#_cardName1#]

cardSearch_searchLibrary: >
 - |
  [_cardTextMatch2_1:#cardTypes#]
  [_customQuery:text="search" text="library for a"  text|="library for an" text!="for a card"]
  [#_customQuery.cardSearchCustomQuery(1,undefined,library for $? $! card)#]
  [_cardName:#_cardName1#][_searchTarget:#_cardTextMatch2_1.a#,#_cardTextMatch2_1.a# card]
 - |
  [_cardTextMatch2_1:#cardTypes#]
  [_customQuery:text="search" text="library for a"  text|="library for an" text!="for a card"]
  [#_customQuery.cardSearchCustomQuery(1,undefined,library for $? $! card)#]
  [_cardName:#_cardName1#][_searchTarget:#_cardTextMatch2_1.a#,#_cardTextMatch2_1.a# card]
 - |
  [_cardTextMatch2_1:#cardTypes#]
  [_customQuery:text="search" text="cards and" text!="those cards"]
  [#_customQuery.cardSearchCustomQuery(1,undefined,library for $ $! cards)#]
  [_cardName:#_cardName1#][_searchTarget:#_cardTextMatch2_1.a#,#_cardTextMatch2_1.a# card,any #_cardTextMatch2_1# cards]

cardSearch_creatureTrigger: >
 - |
  [_customQuery:text="whenever a creature" text!="exalted" text!="flanking" text!="evolve"]
  [#_customQuery.cardSearchCustomQuery(1)#]
  [_cardName:#_cardName1#][_searchTarget:#_cardTextMatch2_1.a#,#_cardTextMatch2_1.a# card]

cardSearch_permanentGrantsCreatureAbility: >
 - |
  [_cardTextMatch1_1:the intended ability] 
  [_customQuery:text="creature gains" text!="strike" text!="this ability" text!="your choice" t!="instant" t!="sorcery"]
  [#_customQuery.cardSearchCustomQuery(1, undefined,creature gains $!)#]
  [_cardName:#_cardName1#][_ability:#_cardTextMatch1_1#]