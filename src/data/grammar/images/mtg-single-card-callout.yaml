---
singleCardImageTest: >
  [_cardname:#randomRealCard#]
  Your card is #_cardname#.
  #singleCardImage#

# Include this in other headlines that set a single _cardname variable
singleCardImage: >
  #pickRandomBGText# #pickBgColor# #pickRandomPattern# #pickRandomPatternDegree# #pickRandomPatternOrientation# #pickOrientation#
  {htmlImg htmlImgString=`#singleCardHtml#` screenWidth=`580` screenHeight=`330`}

_overlayImageDirPath: "./src/data/images/cardcallout"

_overlayImageIndex:
- "1"
- "2"
- "3"
- "4"
- "5"
- "6"
- "7"
- "8"
- "9"
- "10"
- "11"
- "12"
- "13"
- "14"
- "15"
- "16"
- "17"
- "18"
- "19"
- "20"
- "21"
- "22"
- "23"
- "24"
- "25"
- "26"
- "27"
- "28"
- "29"
- "30"
- "31"
- "32"

pickBgColor:
  - "[_setBgColor:#rgbDark#]"
  - "[_setBgColor:#rgbLight#]"

pickRandomBGText: >
  [_bgText:#randomBgText#]

pickOrientation:
- "[_cardImageOrientation:image-wrap-left][_overlayOrientation:image-overlay-left]"
- "[_cardImageOrientation:image-wrap-right][_overlayOrientation:image-overlay-right]"

rgbDark:
  - "rgb(1#num0-9#, #num11-99#, #num40-99#)"
  - "rgb(1#num0-9#, #num40-99#, #num11-99#)"
  - "rgb(1#num0-9#, #num40-99#, #num40-99#)"
  - "rgb(#num11-99#, 1#num0-9#, #num40-99#)"
  - "rgb(#num40-99#, 1#num0-9#, #num11-99#)"
  - "rgb(#num40-99#, 1#num0-9#, #num40-99#)"
  - "rgb(#num11-99#, #num40-99#, 1#num0-9#)"
  - "rgb(#num40-99#, #num11-99#, 1#num0-9#)"
  - "rgb(#num40-99#, #num40-99#, 1#num0-9#)"

rgbLight:
  - "rgb(#num40-99#, #num11-99#, #num40-99#)"
  - "rgb(#num40-99#, #num40-99#, #num11-99#)"
  - "rgb(#num40-99#, #num40-99#, #num40-99#)"
  - "rgb(#num11-99#,#num40-99#, #num40-99#)"
  - "rgb(#num40-99#, #num40-99#, #num11-99#)"
  - "rgb(#num40-99#, #num40-99#, #num40-99#)"
  - "rgb(#num11-99#, #num40-99#, #num40-99#)"
  - "rgb(#num40-99#, #num11-99#, #num40-99#)"
  - "rgb(#num40-99#, #num40-99#, #num40-99#)"

pickRandomPatternDegree: >
  [_patternRotationDeg:#_randomDegree#deg]
pickRandomPatternOrientation: >
  [_patternOrientation:#_randomPatternOrientation#]
pickRandomPattern: >
  [_backgroundPattern:url(#_patternPath##_patternFile##_patternExtension#)]

# Range from -29 to 29
_randomDegree:
  -  "2#num1-9#"
  - "-2#num1-9#"

_randomPatternOrientation:
- "-1"
- "1"

_patternPath: "file:///C:/Users/Justin/Desktop/backgrounds/"
_patternExtension: .png
_patternFile:
- banana
- banana-inverted

_cardImageOrientation: image-wrap-left # this is the default
_overlayOrientation: image-overlay-left # this is the default
_patternOrientation: 0deg; # this is the default

singleCardHtml: |
  <head>
    <style>
         body, div {
      padding: 0;
      margin: 0;
    }
    .color-bg {
      background-color: #_setBgColor#;
      width:100%;
      height:100%;
    }
    .pattern-bg {
      /* background-image: url(file:///C:/Users/Justin/Desktop/backgrounds/banana.png); */
      background-image: #_backgroundPattern#;
      width: 400%;
      top: -100%;
      left: -100%;
      height: 400%; 
      opacity: 0.1;
      position: fixed;
      background-repeat: repeat-x repeat-y;
      padding: 0;
      margin: 0;
      z-index:0;      
      -webkit-transform: rotate(#_patternRotationDeg#) scaleX(#_patternOrientation#);     
    }
    .mtg-card {
      -webkit-mask-image: url(file:///D:/Development/git/mtgnewsbot/src/data/images/cardmask.png);
      -webkit-mask-position: center center;
      -webkit-mask-repeat: no-repeat;
      padding: 9px;
    }
    .single-card {
      background-color: black;
      height: 330px;
      width: 580px;
      overflow: hidden;
      border: 0px;
      line-height: 1.3em;
      font-size: 66%;
      border: 1px solid black;
    }
    .text-container {
      height: 700px;
      width: 700px;      
      position: absolute;
      overflow: hidden;
    }
    .image-wrap {
      position: absolute;
    }
    div.image-overlay {
      position: absolute;
      top: 0;
      left: 0;
      z-index: 10;
    }
    div.image-overlay-right {
      -webkit-transform:scaleX(-1);
    }
    div.image-wrap-right {
      position:relative;
      float:right;
    }
    .col-100 { width: 100%; }
    </style>
  </head>
  <body>
    <div class="single-card">
      <div class="color-bg">
        <div class="text-container">
          <div class="pattern-bg color-bg"></div>
        </div>    
        <div class="image-wrap #_cardImageOrientation#">
          <img class="mtg-card" src="https://goodgamery.com/api/mtg/image?card=#_cardname#" />
        </div>
        <div class="image-overlay #_overlayOrientation#">
          <img class="image-overlay" src="#_overlayImageDirPath#/overlay#_overlayImageIndex#.png"/>
        </div>                
      </div>
    </div>
  </body>